<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no">
    <title>订单确认</title>
    <meta name="description" content="GUESS">
    <meta name="keywords" content="GUESS">
    <link rel="stylesheet" href="../css/main.min.css">
    <script>
    var deviceWidth = document.documentElement.clientWidth;
    deviceWidth = deviceWidth > 750 ? 750 : deviceWidth;
    document.documentElement.style.fontSize = deviceWidth / 7.5 + 'px';
    </script>
</head>

<body>
    <section class="container bg-6">
        <div class="wrapper">
            <a href="" class="back"></a>
            <div class="logo-wh mb-reset"><img src="../images/logo-wh.png"></div>
            <div class="title">订单确认</div>
            <div class="form-content h-80 p0">
                <dl class="info-items cart-items">
                    <dt>
                        <div class="flex align-center">
                            <label><i class="icon icon-city"></i></label>
                            <div class="text-left ml10 mr10">
                                <p>收货人：GUESS WU
                                </p>
                                <p>联络电话：15612345678 </p>
                                <p>上海市吴淞路575号1203室</p>
                            </div>
                        </div>
                        <a href="" class="triangle pos-r"></a>
                    </dt>
                    <dd class="p0">
                    	<div class="pro-box">
                    		<div class="pro-img">
                    			<img src="../images/pro-img.jpg">
                    		</div>
                    		<div class="pro-details">
                    			<p>时尚帆布包</p>
                    			<p>所需积分：3000</p>
                    		</div>
                    		<div class="operation">
                    			<a href="javascript:;" class="add">+</a>
                    			<input type="number" class="operation-num" value="1" />
                    			<a href="javascript:;" class="subtract">-</a>
                    		</div>
                    		<a href="javascript:;" class="delete">
                    			<i class="icon icon-delete"></i>
                    		</a>
                    	</div>
                    </dd>
                     <dd class="p0">
                    	<div class="pro-box">
                    		<div class="pro-img">
                    			<img src="../images/pro-img.jpg">
                    		</div>
                    		<div class="pro-details">
                    			<p>时尚帆布包</p>
                    			<p>所需积分：3000</p>
                    		</div>
                    		<div class="operation">
                    			<a href="javascript:;" class="add" data-max="5">+</a>
                    			<input type="number" class="operation-num" value="1" />
                    			<a href="javascript:;" class="subtract" data-min = "0">-</a>
                    		</div>
                    		<a href="javascript:;" class="delete hide">
                    			<i class="icon icon-delete"></i>
                    		</a>
                    	</div>
                    </dd>
                </dl>
            </div>
        </div>
        <div class="checkout-submit btn-fixed">
        	<div>已选择<span class="red">2</span>件</div>
        	<div>共<span class="red">3000</span>积分</div>
        	<button id="btn-confirm" class="btn btn-confirm btn-red btn-noradius pl20 pr20">确认兑换</button>
        </div>
    </section>
    <!-- 兑换成功 -->
    <script id="success" type="text/template">
    	<p class="text-center large m20">兑换成功！</p>
			<p class="m20 p5 ">优惠券已发放，请前往会员中心的【优惠券】查看详情；如您兑换实物礼，礼品将寄往您订单中填写的地址，请注意查收。</p>
			<p class="m20 p5">若有任何问题，请通过会员中心的【联系我们】获取帮助。</p>
    </script>
    <!-- 兑换失败 -->
    <script id="fail" type="text/template">
    	<p class="text-center large m20">对不起！  </p>
			<p class="m20 p5 ">您的积分余额不足。可通过日常消费或参与会员活动获取积分。</p>
    </script>
    <script src="../libs/zepto.min.js"></script>
    <script src="../js/main.min.js"></script>
    <script type="text/javascript">
    	$(document).on('touchmove', '.pro-box', function(event) {
    		var $this = $(this);
    		var $delete = $this.find('.delete');
    		$delete[$delete.hasClass('hide') ? 'removeClass':'addClass']('hide');
    	});

    	$('.operation>a').on('click', function(event) {
    		event.preventDefault();
    		var $this = $(this);
    		var $operationNum = $this.siblings('.operation-num');
    		var _num = $operationNum.val();
    		var $operation = $this.attr('class');
    		console.log($operation);
    		if($operation == 'add'){
    			var _max = $this.data('max');
    			if(parseInt(_num) <parseInt(_max)){
    				_num++;
    				$operationNum.val(_num);
    			}
    		}
    		if($operation == 'subtract'){
    			var _min = $this.data('min');
    			if(parseInt(_num) >parseInt(_min)){
    				_num--;
    				$operationNum.val(_num);
    			}
    		}
    	});

    	$('#btn-confirm').on('click', function(event) {
    		event.preventDefault();
    		layerShow($('#fail'));
    	});
    </script>
</body>

</html>